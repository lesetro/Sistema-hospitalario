doctype html
html(lang='es')
  head
    meta(charset='UTF-8')
    meta(name='viewport', content='width=device-width, initial-scale=1.0')
    title #{title} - Sistema de Gestión Hospitalaria
    link(href='https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css', rel='stylesheet')
    link(href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css', rel='stylesheet')
    link(rel='stylesheet', href='/css/style.css')
    link(rel="stylesheet", href="/css/internacion.css")
  body
    // Sidebar
    nav#sidebar.sidebar
      .sidebar-header
        h4
          i.fas.fa-hospital
          |  Hospital
        p Sistema de Gestión
      .sidebar-menu
        .menu-item
          a.menu-link(href='/', class=(title === 'Dashboard' ? 'active' : ''))
            i.fas.fa-tachometer-alt
            span Inicio
        .menu-item
          a.menu-link(href='/admisiones', class=(title === 'Admisiones' ? 'active' : ''))
            i.fas.fa-user-plus
            span Admisiones
        .menu-item
          a.menu-link(href='/internacion', class=(title === 'Internaciones' ? 'active' : ''))
            i.fas.fa-bed
            span Internaciones
        .menu-item
          a.menu-link(href='/turnos', class=(title === 'Turnos' ? 'active' : ''))
            i.fas.fa-calendar-alt
            span Turnos
        .menu-item
          a.menu-link(href='/pacientes', class=(title === 'Pacientes' ? 'active' : ''))
            i.fas.fa-users
            span Pacientes
        .menu-item
          a.menu-link(href='/facturas', class=(title === 'Facturación y Pagos' ? 'active' : ''))
            i.fas.fa-file-invoice-dollar
            span Facturación y Pagos
        .menu-item
          a.menu-link(href='/procedimientos-estudios', class=(title === 'Procedimientos y Estudios' ? 'active' : ''))
            i.fas.fa-stethoscope
            span Procedimientos y Estudios
        .menu-item
          a.menu-link(href='/reclamos-derivaciones', class=(title === 'Derivaciones y Reclamos' ? 'active' : ''))
            i.fas.fa-exchange-alt
            span Derivaciones y Reclamos
        .menu-item
          a.menu-link(href='/comunicacion', class=(title === 'Comunicación' ? 'active' : ''))
            i.fas.fa-comments
            span Comunicaciones
        .menu-item
          a.menu-link(href='/personal', class=(title === 'Gestión de Personal' ? 'active' : ''))
            i.fas.fa-user-md
            span Gestión de Personal
        .menu-item
          a.menu-link(href='/configuracion/normalizadores', class=(title === 'Configuración del Hospital' ? 'active' : ''))
            i.fas.fa-cogs
            span Configuración
        .menu-item
          a.menu-link(href='/usuarios', class=(title === 'Usuarios y Seguridad' ? 'active' : ''))
            i.fas.fa-shield-alt
            span Usuarios
        .menu-item
          a.menu-link(href='/altas-medicas', class=(title === 'Altas medicas' ? 'active' : ''))
            i.fas.fa-shield-alt
            span Altas 
        .menu-item
          a.menu-link(href='/configuracion/infraestructura', class=(title === 'Infraestructura Hospitalaria' ? 'active' : ''))
            i.fas.fa-building
            span Infraestructura
        

    // Main Content
    .main-content
      // Header
      header.header
        .d-flex.align-items-center.justify-content-between.w-100
          button.btn.btn-link.mobile-menu-toggle.me-3(onclick='toggleSidebar()')
            i.fas.fa-bars
          .user-info.d-flex.align-items-center
            a.btn.btn-sm.btn-outline-primary.me-3(href='/comunicacion' title='Mensajes')
              i.fas.fa-envelope.me-1
              span#header-contador-mensajes.badge.bg-danger(style='display:none') 0
            a.d-flex.align-items-center.text-decoration-none.text-dark(href='/auth/perfil' title='Ver perfil')
              span.me-2 #{user ? user.nombre : 'Administrador'}
            .user-avatar
              i.fas.fa-user

      // Búsqueda global
      .search-section.mb-4
        .card
          .card-header
            h5.mb-0
              i.fas.fa-search.me-2
              | Búsqueda Global
          .card-body
            .row.align-items-center
              .col-md-8
                .input-group
                  input#globalSearch.form-control(type="text" placeholder="Buscar pacientes, admisiones, turnos..." aria-label="Búsqueda global")
                  button.btn.btn-outline-secondary#globalSearchBtn(type="button")
                    i.fas.fa-search
              .col-md-4
                select#searchFilter.form-select
                  option(value="all") Buscar en todo
                  option(value="pacientes") Solo pacientes
                  option(value="admisiones") Solo admisiones
                  option(value="turnos") Solo turnos
            #searchResults.mt-3(style="display: none;")
              // Resultados de búsqueda aparecerán aquí

      

      // Content Area
      .content-area
        block content

    // Scripts
    script(src='https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js')
    script(src='/js/script.js')
    script(src='/js/busqueda-global.js')
    block scripts
      if title === 'Admisiones'
        script(src='/js/admin/admision.js')